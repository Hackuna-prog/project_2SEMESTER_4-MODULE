# project_1SEMESTER_2-MODULE
Web application firewall в виде модулей Apache mod_app.so и mod_appfilter.so

# Краткое описание работы двух модулей Apache.
HTTP-запрос клиента хранится в виде структуры request_req.

Сначала сервер направляет запрос фильтру mod_appfilter.so, если SQLi не найдена, то запрос передаётся серверному модулю mod_app.so. Затем запрос парсится.

Далее в базе данных Postgresql модуль проверяет наличие sha256 хеша по логину и далее сообщает серверу статус кода OK либо Forbidden.

## Запуск проекта

Для начала убедитесь, что у Вас есть Apache (httpd).
Также установлены библиотеки для работы с модулями:
```bash
dnf install apr-util-pgsql httpd-devel libapreq2-devel openssl-devel
```

Если используете Рэд Ос Линукс измените параметры управления доступом SELinux:
```bash
setsebool -P httpd_can_network_connect_db 1
```

В проекте использовался DBeaver 25.1.0. В Edit connection измените значения юзернэйма и пароля на 
Username=u, Password=1234567


Чтобы настроить БД выполните скрипт
```bash
./1_db
```

Подготовка модулей к работе прописана в скрипте
```bash
./2_module
```

Запустить тестирование
```bash
./3_test
```

Тестирование каждой функции по отдельности недоступно - они все управляются Apache, можно только выводить всё в логи, либо пользоваться отладчиком gdb.

Подробное описание программ mod_app.cpp и mod_appfilter.cpp есть в разделе /doc в файлах с тем же названием. Также есть документация, сгенерированная Doxygen.
